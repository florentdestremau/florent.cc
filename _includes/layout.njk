<!doctype html>
<html lang="fr">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }}</title>
    <meta name="description" content="{{ description }}">
    <meta name="author" content="Florent Destremau">

    <!-- Canonical URL -->
    <link rel="canonical" href="https://florent.cc{{ page.url }}">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="{% if tags and ('posts' in tags) %}article{% else %}website{% endif %}">
    <meta property="og:url" content="https://florent.cc{{ page.url }}">
    <meta property="og:title" content="{{ title }}">
    <meta property="og:description" content="{{ description }}">
    <meta property="og:image" content="https://florent.cc/img/florent.jpg">
    <meta property="og:locale" content="fr_FR">
    <meta property="og:site_name" content="Florent Destremau">
    {% if tags and ('posts' in tags) and date %}
    <meta property="article:published_time" content="{{ date | dateISO }}">
    <meta property="article:author" content="Florent Destremau">
    {% endif %}

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@FloDestremau">
    <meta name="twitter:creator" content="@FloDestremau">
    <meta name="twitter:title" content="{{ title }}">
    <meta name="twitter:description" content="{{ description }}">
    <meta name="twitter:image" content="https://florent.cc/img/florent.jpg">

    <link rel="stylesheet" href="/bundle.css">
    <link rel="icon" href="/img/favicon.ico">
    <link href="https://unpkg.com/prismjs@1.20.0/themes/prism.css" rel="stylesheet"/>

    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "{% if tags and ('posts' in tags) %}BlogPosting{% else %}Person{% endif %}",
        {% if tags and ('posts' in tags) %}
        "headline": "{{ title }}",
        "description": "{{ description }}",
        "datePublished": "{{ date | dateISO }}",
        "author": {
            "@type": "Person",
            "name": "Florent Destremau",
            "url": "https://florent.cc"
        },
        "publisher": {
            "@type": "Person",
            "name": "Florent Destremau",
            "url": "https://florent.cc"
        },
        "url": "https://florent.cc{{ page.url }}",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https://florent.cc{{ page.url }}"
        }
        {% else %}
        "name": "Florent Destremau",
        "jobTitle": "CTO Freelance",
        "description": "CTO fullstack en PHP et JS, je mets les mains dans le code pour accélérer vos projets",
        "url": "https://florent.cc",
        "image": "https://florent.cc/img/florent.jpg",
        "sameAs": [
            "https://www.linkedin.com/in/florent-destremau/",
            "https://x.com/FloDestremau",
            "https://github.com/florentdestremau"
        ]
        {% endif %}
    }
    </script>
<!--    analytics  -->
    <script defer src="https://cloud.umami.is/script.js" data-website-id="652e7403-79d2-4332-b279-45b33272de6a"></script>
    <script defer async src="https://tracker.hakanai.io/hakanai.min.js" data-site="8944cb50-bf23-4016-a94c-c39aea83e8a2" data-link-tracking="true"></script>
    <!--    /analytics  -->
</head>

<body>
<button id="theme-toggle-btn" class="theme-toggle-btn" aria-label="Toggle dark mode">
    <svg class="theme-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
    </svg>
</button>
<div class="background"></div>
<div class="content">
    <header>
        <div>
            <a href="/">
                <img src="/img/florent.jpg" width="80" height="80" alt="Florent Destremau">
                <p>Florent Destremau</p>
            </a>
            <div class="lead">CTO Freelance et Dev PHP</div>
            <p>
                CTO fullstack en PHP et JS, je mets les mains dans le code pour accélérer vos projets.
                <br>
                Retrouvez-moi sur <a target="_blank" href="https://www.linkedin.com/in/florent-destremau/">LinkedIn</a>,
                sur <a target="_blank" href="https://x.com/FloDestremau">X.com</a> ou consultez mon
                <a target="_blank" href="https://github.com/florentdestremau">Github</a>.
            </p>
        </div>
        <nav>
            <a href="/#mes-articles">Blog</a>
            <a href="/about">À&nbsp;propos</a>
        </nav>
    </header>
    {{ content | safe }}

    {% if tags and ('posts' in tags) and collections and collections.posts %}
    {% set postList = collections.posts %}
    {% set currentIndex = -1 %}
    {% for p in postList %}
    {% if p.url == page.url %}
    {% set currentIndex = loop.index0 %}
    {% endif %}
    {% endfor %}
    {% if currentIndex >= 0 %}
    {% set prevPost = null %}
    {% if currentIndex > 0 %}
    {% set prevPost = postList[currentIndex - 1] %}
    {% endif %}
    {% set nextPost = null %}
    {% if currentIndex + 1 < (postList | length) %}
    {% set nextPost = postList[currentIndex + 1] %}
    {% endif %}
    <footer class="post-nav">
        <hr>
        <div style="display:flex;justify-content:space-between;gap:1rem;flex-wrap:wrap;">
            <div>
                {% if prevPost %}
                <a href="{{ prevPost.url }}" rel="prev">← Article précédent<br><strong>{{ prevPost.data.title
                    }}</strong></a>
                {% endif %}
            </div>
            <div style="margin-left:auto;text-align:right;">
                {% if nextPost %}
                <a href="{{ nextPost.url }}" rel="next">Article suivant →<br><strong>{{ nextPost.data.title }}</strong></a>
                {% endif %}
            </div>
        </div>
    </footer>
    {% endif %}
    {% endif %}
</div>
<script>
    // Dark mode toggle script
    const themeToggleBtn = document.getElementById('theme-toggle-btn');
    const htmlElement = document.documentElement;

    // SVG icons
    const moonIcon = '<svg class="theme-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>';
    const sunIcon = '<svg class="theme-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>';

    // Check for saved theme preference or default to light mode
    const currentTheme = localStorage.getItem('theme') || 'light';
    if (currentTheme === 'dark') {
        htmlElement.setAttribute('data-theme', 'dark');
        themeToggleBtn.innerHTML = sunIcon;
    }

    // Listen for toggle changes
    themeToggleBtn.addEventListener('click', function() {
        const isDark = htmlElement.getAttribute('data-theme') === 'dark';

        if (isDark) {
            htmlElement.removeAttribute('data-theme');
            localStorage.setItem('theme', 'light');
            themeToggleBtn.innerHTML = moonIcon;
        } else {
            htmlElement.setAttribute('data-theme', 'dark');
            localStorage.setItem('theme', 'dark');
            themeToggleBtn.innerHTML = sunIcon;
        }
    });
</script>
</body>

</html>
